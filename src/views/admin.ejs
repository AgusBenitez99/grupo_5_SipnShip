<!DOCTYPE html>
<html lang="en">
<%- include('partials/head', { title: 'ADMIN' }) %>

    <body class="admin">

        <aside>
            <ul id="opciones">
                <li data-target="div1">
                    <p>Dashboard</p>
                </li>
                <li data-target="div2">
                    <p>Usuarios</p>
                </li>
                <li data-target="div3">
                    <p>Productos</p>
                </li>
                <li>
                    <p>Favoritos</p>
                </li>
                <!-- <li><a href="/">
                        <p>Salir</p>
                </li></a> -->
            </ul>
        </aside>
        <main class="main__admin">
            <header class="main__admin__header">
                <div class="main__admin__header-text">
                    <h1>Panel de administracion</h1>
                    <p>En este panel va a poder realizar toda la configuracion necesaria</p>
                </div>
                <div class="main__admin__header-icon">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTeE49t-u-MwSe5Ia4mL_IzNjsE_EP3gf-27JaSuxJnOQ&s"
                        alt="">
                        <a href="/"><i class="fa-solid fa-arrow-right-from-bracket"></i></a>
                </div>

            </header>
            <div id="div3" class="table__container-oculto">
                <div class="table__container-header">
                    <h2 class="lista__title">Tabla de Productos</h2>
                    <a href="/product/new">Agregar producto</a>
                </div>
                <table>

                    <tr>
                        <th>#</th>
                        <th>Imagen</th>
                        <th>Nombre</th>
                        <th>Precio</th>
                        <th>Categoria</th>
                        <th></th>
                    </tr>
                    <% products.forEach((product,index)=> { %>
                        <tr>
                            <td>
                                <%= index + 1 %>
                            </td>
                            <td><img class="product-image" src="/images/<%= product.mainImage %>" alt="Producto 1"></td>
                            <td>
                                <%= product.name %>
                            </td>
                            <td><strong>$<%= product.price %></strong></td>
                            <td>
                                <%= product.brand %>
                            </td>
                            <td>
                                <div class="actions">

                                    <a href="/product/detail/<%= product.id %>"><i class="far fa-eye"></i></a>
                                    <a href="/product/edit/<%= product.id %>"> <i class="fas fa-edit"></i></a>
                                    <!-- <a href="/product/delete/<%= product.id %>?_method=DELETE"><i
                                            class="fas fa-trash-alt"></i></a> -->
                                    <button type="button" class="btn btn-sm btn-danger" data-bs-toggle="modal"
                                        data-bs-target="#modalDelete<%=product.id%>">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>

                                    <div class="modal fade" id="modalDelete<%=product.id%>" tabindex="-1"
                                        aria-labelledby="modalDeleteLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content"> 
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="modalDeleteLabel">
                                                        Advertencia
                                                    </h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <p style="color:blue">¿Estás seguro que querés
                                                        eliminar el producto <b>
                                                            <%= product.name %>
                                                        </b>?</p>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary"
                                                        data-bs-dismiss="modal">Cancelar</button>
                                                    <form action="/product/delete/<%=product.id%>?_method=DELETE"
                                                        method="POST">
                                                        <button type="submit" class="btn btn-danger">Eliminalo</button>
                                                    </form>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- <form action="/product/delete/<%= product.id %>?_method=DELETE" method="POST">

                                        <button type="submit"> <i class="fas fa-trash-alt"></i></button>

                                    </form> -->


                                </div>
                            </td>
                        </tr>
                        <% }) %>

                </table>

            </div>
            <div id="div2" class="table__container-oculto">
                <h2 class="lista__title">Tabla de Usuarios</h2>
                <table>

                    <tr>
                        <th>Imagen</th>
                        <th>Nombre</th>
                        <th>permisos</th>
                        <th>lala</th>
                    </tr>
                    <% products.forEach(product=> { %>
                        <tr>
                            <td><img class="product-image" src="/images/fernet.png" alt="Producto 1"></td>
                            <td>
                                <%= product.name %>
                            </td>
                            <td><strong>$<%= product.price %></strong></td>
                            <td>
                                <%= product.brand %>
                            </td>
                        </tr>
                        <% }) %>

                </table>

            </div>
        </main>
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                var opciones = document.getElementById("opciones").getElementsByTagName("li");
                for (var i = 0; i < opciones.length; i++) {
                    opciones[i].addEventListener("click", function () {
                        var targetDivId = this.getAttribute("data-target");
                        var targetDiv = document.getElementById(targetDivId);

                        // Oculta todos los divs
                        var divs = document.querySelectorAll("div");
                        divs.forEach(function (div) {
                            div.classList.remove("table__container-vista");
                        });

                        // Muestra el div seleccionado
                        targetDiv.classList.add("table__container-vista");
                    });
                }
            });
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>
    </body>

</html>